import React, { useEffect, useState } from 'react';
import { useAppSelector } from '@redux/hooks/hooks';

// Tooltip
import Tooltip from '@components/Tooltip/Tooltip.component';

const ProbeCalibrationButton = (props: any) => {
  const [isDisabled, setIsDisabled] = useState(false);
  const { isActive, onClick } = props;
  // Check if the button is active and set the styling accordingly
  const recordState = useAppSelector(
    (state) => state.global.recordState?.recordState
  );

  useEffect(() => {
    if (recordState === 'recording' || recordState === 'continue') {
      setIsDisabled(true);
    } else {
      setIsDisabled(false);
    }
  }, [recordState]);

  return (
    <Tooltip
      text={`${isDisabled ? 'Disabled While Recording' : 'Probe Calibration'} `}
      placement="right"
    >
      <button
        type="button"
        className={`icon-button ${
          isActive && 'icon-button-active bg-white bg-opacity-5'
        } ${isDisabled && 'cursor-not-allowed'} `}
        onClick={isDisabled ? undefined : onClick}
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 32 32"
          width="2.5rem"
          height="2.5rem"
          color="#CCC"
        >
          <g>
            <path
              fill={`${isDisabled && '#555'}`}
              d="M 16.320312 2.667969 C 16.058594 2.671875 15.808594 2.777344 15.625 2.960938 L 12.960938 5.625 C 12.699219 5.878906 12.59375 6.25 12.683594 6.601562 C 12.777344 6.949219 13.050781 7.222656 13.398438 7.316406 C 13.75 7.40625 14.121094 7.300781 14.375 7.039062 L 15.332031 6.082031 L 15.332031 9.667969 C 15.328125 10.027344 15.519531 10.363281 15.828125 10.542969 C 16.140625 10.726562 16.527344 10.726562 16.835938 10.542969 C 17.148438 10.363281 17.339844 10.027344 17.332031 9.667969 L 17.332031 6.082031 L 18.292969 7.039062 C 18.542969 7.300781 18.917969 7.40625 19.265625 7.316406 C 19.617188 7.222656 19.890625 6.949219 19.980469 6.601562 C 20.074219 6.25 19.96875 5.878906 19.707031 5.625 L 17.039062 2.960938 C 16.847656 2.769531 16.589844 2.664062 16.320312 2.667969 Z M 24.984375 6.667969 C 24.726562 6.671875 24.476562 6.777344 24.292969 6.960938 L 21.625 9.625 C 21.363281 9.878906 21.261719 10.25 21.351562 10.601562 C 21.441406 10.949219 21.714844 11.222656 22.066406 11.316406 C 22.417969 11.40625 22.789062 11.300781 23.039062 11.039062 L 24 10.082031 L 24 13.667969 C 23.996094 14.027344 24.183594 14.363281 24.496094 14.542969 C 24.808594 14.726562 25.191406 14.726562 25.503906 14.542969 C 25.816406 14.363281 26.003906 14.027344 26 13.667969 L 26 10.082031 L 26.960938 11.039062 C 27.210938 11.300781 27.582031 11.40625 27.933594 11.316406 C 28.285156 11.222656 28.558594 10.949219 28.648438 10.601562 C 28.738281 10.25 28.636719 9.878906 28.375 9.625 L 25.707031 6.960938 C 25.515625 6.769531 25.253906 6.664062 24.984375 6.667969 Z M 7.652344 10.667969 C 7.390625 10.671875 7.144531 10.777344 6.960938 10.960938 L 4.292969 13.625 C 4.03125 13.878906 3.925781 14.25 4.019531 14.601562 C 4.109375 14.949219 4.382812 15.222656 4.734375 15.316406 C 5.082031 15.40625 5.457031 15.300781 5.707031 15.039062 L 6.667969 14.082031 L 6.667969 17.667969 C 6.660156 18.027344 6.851562 18.363281 7.164062 18.542969 C 7.472656 18.726562 7.859375 18.726562 8.171875 18.542969 C 8.480469 18.363281 8.671875 18.027344 8.667969 17.667969 L 8.667969 14.082031 L 9.625 15.039062 C 9.878906 15.300781 10.25 15.40625 10.601562 15.316406 C 10.949219 15.222656 11.222656 14.949219 11.316406 14.601562 C 11.40625 14.25 11.300781 13.878906 11.039062 13.625 L 8.375 10.960938 C 8.183594 10.769531 7.921875 10.664062 7.652344 10.667969 Z M 16.332031 12 C 14.6875 12 13.332031 13.355469 13.332031 15 L 13.332031 26.332031 C 13.332031 27.976562 14.6875 29.332031 16.332031 29.332031 C 17.976562 29.332031 19.332031 27.976562 19.332031 26.332031 L 19.332031 15 C 19.332031 13.355469 17.976562 12 16.332031 12 Z M 16.332031 14 C 16.898438 14 17.332031 14.4375 17.332031 15 L 17.332031 26.332031 C 17.332031 26.898438 16.898438 27.332031 16.332031 27.332031 C 15.769531 27.332031 15.332031 26.898438 15.332031 26.332031 L 15.332031 15 C 15.332031 14.4375 15.769531 14 16.332031 14 Z M 25 16 C 23.355469 16 22 17.355469 22 19 L 22 26.332031 C 22 27.976562 23.355469 29.332031 25 29.332031 C 26.644531 29.332031 28 27.976562 28 26.332031 L 28 19 C 28 17.355469 26.644531 16 25 16 Z M 25 18 C 25.5625 18 26 18.4375 26 19 L 26 26.332031 C 26 26.898438 25.5625 27.332031 25 27.332031 C 24.4375 27.332031 24 26.898438 24 26.332031 L 24 19 C 24 18.4375 24.4375 18 25 18 Z M 7.667969 20 C 6.023438 20 4.667969 21.355469 4.667969 23 L 4.667969 26.332031 C 4.667969 27.976562 6.023438 29.332031 7.667969 29.332031 C 9.3125 29.332031 10.667969 27.976562 10.667969 26.332031 L 10.667969 23 C 10.667969 21.355469 9.3125 20 7.667969 20 Z M 7.667969 22 C 8.230469 22 8.667969 22.4375 8.667969 23 L 8.667969 26.332031 C 8.667969 26.898438 8.230469 27.332031 7.667969 27.332031 C 7.101562 27.332031 6.667969 26.898438 6.667969 26.332031 L 6.667969 23 C 6.667969 22.4375 7.101562 22 7.667969 22 Z M 7.667969 22 "
            />{' '}
          </g>
        </svg>
      </button>
    </Tooltip>
  );
};

export default ProbeCalibrationButton;
